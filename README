# this is the first version
This project is to turn a Raspberry PI as an audio device. The device is able to do 2 functions: as a sound collector and as a test-tone generator.

Table of Content
	1. Configuration Instructions
	2. Installation Instructions
	3. Operating Instructions
	4. File list (Manifest)
	5. Copyright / Copyleft
	6. Contact Information
	7. Credits and Acknowledgements

1. Configuration Instructions

The application is running on a Raspberry PI 3 model B. This PI should come with a USB sound card, a network connection and a microphone.

1.1 Configure USB sound card as default audio device

The Raspberry PI sound card does NOT have a microphone interface. Therefore, the user have to change the default audio device to be an USB sound card.
	a. Turn ON your Raspberry PI and apply the USB sound card. Type "lsusb" command (without the "") to check if your USB sound card is mounted.
	b. Type "sudo nano /etc/asound.conf" (without the "") command and put following content to the file:
	pcm.!default {
		type plug
		slave {
			pcm "hm:1,0"
		}
	}
	ctl.!default {
		type hw
		card 1
	}
	c. Go to your home directory (type "$ cd"). Once there, type "nano .asoundrc" command and put the same content from step b. to the file
	d. Type "alsamixer", you should be able to see the USB sound card inserted as the default audio device. For a more sensitive sound detection, it is better to maximize the volume of "Mic" by navigating with your keyboard arrows.
1.2 Fix the Bug of arecord

The newest version of Raspbian (a.k.a. Jessie) comes with a new version of alsa-utils (1.0.28), which has a bug while recording: it doesn.t stop even a '.duration' switch is given, and generates lots of useless audio files.
To fix this problem, we have to downgrade alsa-util to an earlier version (1.0.25).
	a. Type "sudo nano /etc/apt/sources.list" command and add the last line:
		deb http://mirrordirector.raspbian.org/raspbian/ wheezy main contrib non-free rpi
	b. Type "sudo apt-get update"
	c. Type "sudo aptitude versions alsa-utils" to check if version 1.0.25 of alsa-util is available.
	d. Type "sudo apt-get install alsa-utils=1.0.25-4" to downgrade.
	e. Reboot (if necessary)
	f. Type "arecord -r44100 -c1 -f S16_LE -d5 test.wav" to test that your microphone is working. You should see a "test.wav" file in the current folder ( to list the files use the command "ls" ).
	g. Use an earphone on the USB sound card. Run "aplay test.wav" to check that your recording is okay.

1.3 Install Libcurl library

In order to use this application, the user needs to install the libcurl library.
	a. Use the command "ls /usr/include/curl" or "ls /usr/include/arm-linux-gnueabihf/curl" to identify that libcurl library is installed.
	b. If the folder does NOT exist, run "sudo apt-get update" to update the application list.
	c. Type "sudo apt-get install libcurl3" to install the libcurl3.
	d. Type "sudo apt-get install libcurl4-openssl-dev" to install the development API of libcurl4.

2. Installation Instructions

Once the Raspberry PI is succesfully configured, proceed to the installation steps.

4. File List (Manifest)

	a. README
	b. comm.c
	c. comm.h
	d. curltest.c
	e. main.c
	f. makefile
	g. screen.c
	h. screen.h
	i. sound.c
	j. sound.h
	k. sound.php
5. Copyright

6. Contact Information

If you have any problems concerning the configuration, installation, bugs or doubts, please send me an email to "murillo.finlandia@gmail.com"

7. Credits and Aknowledgements

Teacher and responsible for orienting the project Dr. Gao Chao
Student and responsible for executing the project Murillo Suarez Figueiredo Nunes
